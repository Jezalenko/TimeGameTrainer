{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import{InterruptionModeAndroid,InterruptionModeIOS}from\"./Audio.types\";import ExponentAV from\"./ExponentAV\";export*from\"./Audio/Recording\";export*from\"./Audio/Sound\";export{setIsEnabledAsync}from\"./Audio/AudioAvailability\";export{PitchCorrectionQuality}from\"./AV\";var _populateMissingKeys=function _populateMissingKeys(userAudioMode,defaultAudioMode){for(var key in defaultAudioMode){if(!userAudioMode.hasOwnProperty(key)){userAudioMode[key]=defaultAudioMode[key];}}return userAudioMode;};var defaultMode={allowsRecordingIOS:false,interruptionModeIOS:InterruptionModeIOS.MixWithOthers,playsInSilentModeIOS:false,staysActiveInBackground:false,interruptionModeAndroid:InterruptionModeAndroid.DuckOthers,shouldDuckAndroid:true,playThroughEarpieceAndroid:false};var currentAudioMode=null;function getCurrentAudioMode(){if(!currentAudioMode){return defaultMode;}return currentAudioMode;}export function setAudioModeAsync(_x){return _setAudioModeAsync.apply(this,arguments);}function _setAudioModeAsync(){_setAudioModeAsync=_asyncToGenerator(function*(partialMode){var mode=_populateMissingKeys(partialMode,getCurrentAudioMode());if(!InterruptionModeIOS[mode.interruptionModeIOS]){throw new Error(\"\\\"interruptionModeIOS\\\" was set to an invalid value.\");}if(!InterruptionModeAndroid[mode.interruptionModeAndroid]){throw new Error(\"\\\"interruptionModeAndroid\\\" was set to an invalid value.\");}if(typeof mode.allowsRecordingIOS!=='boolean'||typeof mode.playsInSilentModeIOS!=='boolean'||typeof mode.staysActiveInBackground!=='boolean'||typeof mode.shouldDuckAndroid!=='boolean'||typeof mode.playThroughEarpieceAndroid!=='boolean'){throw new Error('\"allowsRecordingIOS\", \"playsInSilentModeIOS\", \"playThroughEarpieceAndroid\", \"staysActiveInBackground\" and \"shouldDuckAndroid\" must be booleans.');}currentAudioMode=mode;return yield ExponentAV.setAudioMode(mode);});return _setAudioModeAsync.apply(this,arguments);}","map":{"version":3,"names":["InterruptionModeAndroid","InterruptionModeIOS","ExponentAV","setIsEnabledAsync","PitchCorrectionQuality","_populateMissingKeys","userAudioMode","defaultAudioMode","key","hasOwnProperty","defaultMode","allowsRecordingIOS","interruptionModeIOS","MixWithOthers","playsInSilentModeIOS","staysActiveInBackground","interruptionModeAndroid","DuckOthers","shouldDuckAndroid","playThroughEarpieceAndroid","currentAudioMode","getCurrentAudioMode","setAudioModeAsync","_x","_setAudioModeAsync","apply","arguments","_asyncToGenerator","partialMode","mode","Error","setAudioMode"],"sources":["../src/Audio.ts"],"sourcesContent":["import { AudioMode, InterruptionModeAndroid, InterruptionModeIOS } from './Audio.types';\nimport ExponentAV from './ExponentAV';\n\nexport * from './Audio/Recording';\nexport * from './Audio/Sound';\nexport { setIsEnabledAsync } from './Audio/AudioAvailability';\nexport { PitchCorrectionQuality } from './AV';\n\nconst _populateMissingKeys = (\n  userAudioMode: Partial<AudioMode>,\n  defaultAudioMode: AudioMode\n): AudioMode => {\n  for (const key in defaultAudioMode) {\n    if (!userAudioMode.hasOwnProperty(key)) {\n      userAudioMode[key] = defaultAudioMode[key];\n    }\n  }\n  return userAudioMode as AudioMode;\n};\n\nconst defaultMode: AudioMode = {\n  allowsRecordingIOS: false,\n  interruptionModeIOS: InterruptionModeIOS.MixWithOthers,\n  playsInSilentModeIOS: false,\n  staysActiveInBackground: false,\n  interruptionModeAndroid: InterruptionModeAndroid.DuckOthers,\n  shouldDuckAndroid: true,\n  playThroughEarpieceAndroid: false,\n};\n\nlet currentAudioMode: AudioMode | null = null;\n\nfunction getCurrentAudioMode(): AudioMode {\n  if (!currentAudioMode) {\n    return defaultMode;\n  }\n  return currentAudioMode;\n}\n\n/**\n * We provide this API to customize the audio experience on iOS and Android.\n * @param partialMode\n * @return A `Promise` that will reject if the audio mode could not be enabled for the device.\n */\nexport async function setAudioModeAsync(partialMode: Partial<AudioMode>): Promise<void> {\n  const mode = _populateMissingKeys(partialMode, getCurrentAudioMode());\n\n  if (!InterruptionModeIOS[mode.interruptionModeIOS]) {\n    throw new Error(`\"interruptionModeIOS\" was set to an invalid value.`);\n  }\n  if (!InterruptionModeAndroid[mode.interruptionModeAndroid]) {\n    throw new Error(`\"interruptionModeAndroid\" was set to an invalid value.`);\n  }\n  if (\n    typeof mode.allowsRecordingIOS !== 'boolean' ||\n    typeof mode.playsInSilentModeIOS !== 'boolean' ||\n    typeof mode.staysActiveInBackground !== 'boolean' ||\n    typeof mode.shouldDuckAndroid !== 'boolean' ||\n    typeof mode.playThroughEarpieceAndroid !== 'boolean'\n  ) {\n    throw new Error(\n      '\"allowsRecordingIOS\", \"playsInSilentModeIOS\", \"playThroughEarpieceAndroid\", \"staysActiveInBackground\" and \"shouldDuckAndroid\" must be booleans.'\n    );\n  }\n  currentAudioMode = mode;\n  return await ExponentAV.setAudioMode(mode);\n}\n"],"mappings":"uEAAA,OAAoBA,uBAAuB,CAAEC,mBAAmB,qBAChE,MAAO,CAAAC,UAAU,oBAEjB,+BACA,2BACA,OAASC,iBAAiB,iCAC1B,OAASC,sBAAsB,YAE/B,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CACxBC,aAAiC,CACjCC,gBAA2B,CACd,CACb,IAAK,GAAM,CAAAC,GAAG,GAAI,CAAAD,gBAAgB,CAAE,CAClC,GAAI,CAACD,aAAa,CAACG,cAAc,CAACD,GAAG,CAAC,CAAE,CACtCF,aAAa,CAACE,GAAG,CAAC,CAAGD,gBAAgB,CAACC,GAAG,CAAC,C,EAG9C,MAAO,CAAAF,aAA0B,CACnC,CAAC,CAED,GAAM,CAAAI,WAAW,CAAc,CAC7BC,kBAAkB,CAAE,KAAK,CACzBC,mBAAmB,CAAEX,mBAAmB,CAACY,aAAa,CACtDC,oBAAoB,CAAE,KAAK,CAC3BC,uBAAuB,CAAE,KAAK,CAC9BC,uBAAuB,CAAEhB,uBAAuB,CAACiB,UAAU,CAC3DC,iBAAiB,CAAE,IAAI,CACvBC,0BAA0B,CAAE,K,CAC7B,CAED,GAAI,CAAAC,gBAAgB,CAAqB,IAAI,CAE7C,QAAS,CAAAC,mBAAmBA,CAAA,EAC1B,GAAI,CAACD,gBAAgB,CAAE,CACrB,MAAO,CAAAV,WAAW,C,CAEpB,MAAO,CAAAU,gBAAgB,CACzB,CAOA,eAAsB,CAAAE,iBAAiBA,CAAAC,EAAA,SAAAC,kBAAA,CAAAC,KAAA,MAAAC,SAAA,GAsBtC,SAAAF,mBAAA,EAAAA,kBAAA,CAAAG,iBAAA,CAtBM,UAAiCC,WAA+B,EACrE,GAAM,CAAAC,IAAI,CAAGxB,oBAAoB,CAACuB,WAAW,CAAEP,mBAAmB,EAAE,CAAC,CAErE,GAAI,CAACpB,mBAAmB,CAAC4B,IAAI,CAACjB,mBAAmB,CAAC,CAAE,CAClD,KAAM,IAAI,CAAAkB,KAAK,wDAAsD,C,CAEvE,GAAI,CAAC9B,uBAAuB,CAAC6B,IAAI,CAACb,uBAAuB,CAAC,CAAE,CAC1D,KAAM,IAAI,CAAAc,KAAK,4DAA0D,C,CAE3E,GACE,MAAO,CAAAD,IAAI,CAAClB,kBAAkB,GAAK,SAAS,EAC5C,MAAO,CAAAkB,IAAI,CAACf,oBAAoB,GAAK,SAAS,EAC9C,MAAO,CAAAe,IAAI,CAACd,uBAAuB,GAAK,SAAS,EACjD,MAAO,CAAAc,IAAI,CAACX,iBAAiB,GAAK,SAAS,EAC3C,MAAO,CAAAW,IAAI,CAACV,0BAA0B,GAAK,SAAS,CACpD,CACA,KAAM,IAAI,CAAAW,KAAK,CACb,iJAAiJ,CAClJ,C,CAEHV,gBAAgB,CAAGS,IAAI,CACvB,YAAa,CAAA3B,UAAU,CAAC6B,YAAY,CAACF,IAAI,CAAC,CAC5C,CAAC,SAAAL,kBAAA,CAAAC,KAAA,MAAAC,SAAA"},"metadata":{},"sourceType":"module"}